import {Story, Canvas, ArgsTable, Meta} from "@storybook/addon-docs";

import {DataGrid, DataGridName, DataGridControl} from '../../../../components';

<Meta
  title="Onex/Components/DataGrid"
  argTypes={{
    dataTestId: {
      description: 'Id of the component for testing',
    },
    className: {
      description: 'The className',
      table: {
        defaultValue: {
          summary: 'undefined',
        },
      }
    },
    columns: {
      description: 'The array of table columns. Must be memoized.Supports nested columns arrays',
      type: { required: true },
      table: {
        defaultValue: {
          summary: 'undefined',
        },
      }
    },
    data: {
      description: 'The data array that you want to display on the table. Must be memoized',
      type: { required: true },
      table: {
        defaultValue: {
          summary: 'undefined',
        },
      }
    },
    sortBy: {
      description: 'An array of sorting objects. Must be memoized. If there is more than one object in the array, multi-sorting will be enabled. Each sorting object should contain an id key with the corresponding column ID to sort by.',
    },
    rowsPerPageOptions: {
      description: 'The array of quantities of rows per page',
    },
    dataGridControlProps: {
      description: 'Object with dataGridControl props, if you not use this prop - hrid Control not will be visiable, for more detail props go to the DataGrodControl component',
    },
    customGridControl: {
      description: 'Element which replace standart dataGridControl component with your custom component',
      control: 'string'
    },
  }}
  component={DataGrid}
/>


export const Template = (args) => <DataGrid {...args} />;

## DataGrid

A DataGrid is a table-presented data.

### Installation
Using this component requires installation packages : [react-table v7](https://www.npmjs.com/package/react-table/v/7.8.0)

### Demo
<Canvas>
  <Story
    height="35rem"
    name="Demo"
    args={{
      dataTestId: 'data-grid-test-id',
      className: 'data-grid-custom',
      rowsPerPageOptions: [5, 10],
      dataGridControlProps: {
        title: 'Title',
        badge: '23',
      },
      className: {control: 'text'},
      columns: [
        {
          Header: 'ID',
          accessor: 'id',
        },
        {
          Header: 'Study',
          accessor: 'study',
        },
        {
          Header: 'Country',
          accessor: 'country',
        },
        {
          Header: 'Category',
          accessor: 'category',
        },
        {
          Header: 'Created',
          accessor: 'created',
        },
      ],
      data: [
        {
          id: 'M12345',
          study: {value: 'United States 10' },
          country: 'United States 10',
          category: 'Management 10',
          created: '26 Aug 2010',
        },
        {
          id: 'M12346',
          study: {value: 'United States 20'},
          country: 'United States 20',
          category: 'Management 20',
          created: '25 Aug 2010',
        },
        {
          id: 'M12347',
          study: {value: 'United States 30'},
          country: 'United States 30',
          category: 'Management 30',
          created: '24 Aug 2010',
        },
        {
          id: 'M12348',
          study: {value: 'United States 40'},
          country: 'United States 40',
          category: 'Management 40',
          created: '23 Aug 2010',
        },
        {
          id: 'M12349',
          study: {value: 'United States 50'},
          country: 'United States 50',
          category: 'Management 50',
          created: '22 Aug 2010',
        },
        {
          id: 'M123455',
          study: {value: 'United States 60'},
          country: 'United States 60',
          category: 'Management 60',
          created: '21 Aug 2010',
        },
        {
          id: 'M123477',
          study: {value: 'United States 70'},
          country: 'United States 70',
          category: 'Management 70',
          created: '19 Aug 2010',
        },
        {
          id: 'M123416',
          study: {value: 'United States 80'},
          country: 'United States 80',
          category: 'Management 80',
          created: '18 Aug 2010',
        },
        {
          id: 'M123414',
          study: {value: 'United States 90'},
          country: 'United States 90',
          category: 'Management 90',
          created: '17 Aug 2010',
        },
        {
          id: 'M123415',
          study: {value: 'United States 100'},
          country: 'United States 100',
          category: 'Management 100',
          created: '27 Aug 2010',
        }
      ],
      sortBy: [
        {
          id: 'id',
          desc: true,
        }
      ],
      rowsPerPageOptions: [5, 10],
    }}>
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Demo"/>

### Column Options
For more information [Columns option](https://react-table-v7.tanstack.com/docs/api/useTable#column-options)

| Name     | Type                                           | Description                                                                                                                                        | Required |
|----------|------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| accessor | String, Function(originalRow, rowIndex) => any | This string/function is used to build the data model for your column.                                                                              | [x]      |
| id       | String                                         | This is the unique ID for the column. It is used by reference in things like sorting, grouping, filtering etc.. Required if accessor is a function | [x]      |
| columns  | Array[Column]                                  | A nested array of columns.                                                                                                                         |          |
| Header   | String, Function, React.Component => JSX       | Receives the table instance and column model as props. Must either be a string or return valid JSX.                                                |          |


Also, for configure sorting supports - column sorting option. For more information, please check - [Sort column options](https://react-table-v7.tanstack.com/docs/api/useSortBy#column-options)

### Pagination
For pagination is used ```TablePagination``` component. If you want to enable pagination use ```rowsPerPageOptions``` - number of rows per page.
First value in array this is a default rows per page.

### Sorting
Multi-sort is enabled by default.
To configure sorting you can use ```sortBy``` property.
There are an array of sorting objects. If there is more than one object in the array, multi-sorting will be enabled.
Each sorting object should contain an ```id``` key with the corresponding column ID to sort by. An optional ```desc``` key
(which defaults to ```false```) may be set to ```true``` to indicate a descending sorting directionfor that column, otherwise,
it will be assumed to be ascending. This information is stored in state since the table is allowed to manipulate the filter through user interaction.
Must be memoized.

Other parameters are also supported, for more information please check - [Sort table options](https://react-table-v7.tanstack.com/docs/api/useSortBy#table-options)

### Table Header
For add header you must use prop ```dataGridControlProps``` for standart table controll element or ```customGridControl``` prop for your custom table controll, if you not use all of them header not will be add by default.

