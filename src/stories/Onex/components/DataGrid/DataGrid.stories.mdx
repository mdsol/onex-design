import {Story, Canvas, ArgsTable, Meta} from "@storybook/addon-docs";

import {DataGrid, DataGridName, DataGridControl} from '../../../../components';

<Meta
  title="Onex/Components/DataGrid"
  argTypes={{
    dataTestId: {
      description: 'Id of the component for testing',
    },
    className: {
      description: 'The className',
      table: {
        defaultValue: {
          summary: 'undefined',
        },
      }
    },
    columns: {
      description: 'The array of table columns. Must be memoized.Supports nested columns arrays',
      type: { required: true },
      table: {
        defaultValue: {
          summary: 'undefined',
        },
      }
    },
    data: {
      description: 'The data array that you want to display on the table. Must be memoized',
      type: { required: true },
      table: {
        defaultValue: {
          summary: 'undefined',
        },
      }
    },
    rowsPerPageOptions: {
      description: 'The array of quantities of rows per page',
    },
  }}
  component={DataGrid}
/>


export const Template = (args) => <DataGrid {...args} />;

## DataGrid

A DataGrid is a table-presented data.

### Installation
Using this component requires installation packages : [react-table v7](https://www.npmjs.com/package/react-table/v/7.8.0)

### Demo
<Canvas>
  <Story
    height="35rem"
    name="Demo"
    args={{
      dataTestId: 'data-grid-test-id',
      className: 'data-grid-custom',
      dataGridControlComponent: (
        <DataGridControl>
          <DataGridName badgeNumber="100">Test table</DataGridName>
        </DataGridControl>
      ),
      columns: [
        {
          Header: 'ID',
          accessor: 'id',
        },
        {
          Header: 'Study',
          accessor: 'study',
        },
        {
          Header: 'Country',
          accessor: 'country',
        },
        {
          Header: 'Category',
          accessor: 'category',
        },
        {
          Header: 'Created',
          accessor: 'created',
        },
      ],
      data: [
        {
          id: 'M12345',
          study: 'United States30',
          country: 'United States10',
          category: 'Manegement',
          created: '26 Aug 20100',
        },
        {
          id: 'M12346',
          study: 'United States30',
          country: 'United States10',
          category: 'Manegement',
          created: '26 Aug 20100',
        },
        {
          id: 'M12347',
          study: 'United States30',
          country: 'United States10',
          category: 'Manegement',
          created: '26 Aug 20100',
        },
        {
          id: 'M12348',
          study: 'United States30',
          country: 'United States10',
          category: 'Manegement',
          created: '26 Aug 20100',
        },
        {
          id: 'M12349',
          study: 'United States30',
          country: 'United States10',
          category: 'Manegement',
          created: '26 Aug 20100',
        },
        {
          id: 'M123455',
          study: 'United States30',
          country: 'United States10',
          category: 'Manegement',
          created: '26 Aug 20100',
        },
        {
          id: 'M123477',
          study: 'United States30',
          country: 'United States10',
          category: 'Manegement',
          created: '26 Aug 20100',
        },
        {
          id: 'M123416',
          study: 'United States30',
          country: 'United States10',
          category: 'Manegement',
          created: '26 Aug 20100',
        },
        {
          id: 'M123414',
          study: 'United States30',
          country: 'United States10',
          category: 'Manegement',
          created: '26 Aug 20100',
        },
        {
          id: 'M123415',
          study: 'United States30',
          country: 'United States10',
          category: 'Manegement',
          created: '26 Aug 20100',
        }
      ],
      rowsPerPageOptions: [5, 10],
    }}>
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Demo"/>

### Column Options
For more information [Columns option](https://react-table-v7.tanstack.com/docs/api/useTable#column-options)

| Name     | Type                                           | Description                                                                                                                                        | Required |
|----------|------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| accessor | String, Function(originalRow, rowIndex) => any | This string/function is used to build the data model for your column.                                                                              | [x]      |
| id       | String                                         | This is the unique ID for the column. It is used by reference in things like sorting, grouping, filtering etc.. Required if accessor is a function | [x]      |
| columns  | Array[Column]                                  | A nested array of columns.                                                                                                                         |          |
| Header   | String, Function, React.Component => JSX       | Receives the table instance and column model as props. Must either be a string or return valid JSX.                                                |          |

### Pagination
For pagination is used ```TablePagination``` component. If you want to enable pagination use ```rowsPerPageOptions``` - number of rows per page.
First value in array this is a default rows per page.

